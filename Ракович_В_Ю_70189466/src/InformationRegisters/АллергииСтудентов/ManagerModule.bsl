// Проверить аллергию на лекарство
Функция ПроверитьАллергиюНаЛекарство(Студент, Лекарство) Экспорт
    
    // Получаем компоненты лекарства
    Запрос = Новый Запрос;
    Запрос.Текст = 
    "ВЫБРАТЬ
    |    АллергииСтудентов.Аллерген,
    |    АллергииСтудентов.СтепеньТяжести
    |ИЗ
    |    РегистрСведений.АллергииСтудентов КАК АллергииСтудентов
    |        ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Лекарства.Состав КАК Состав
    |        ПО АллергииСтудентов.Аллерген = Состав.Аллерген
    |ГДЕ
    |    АллергииСтудентов.Студент = &Студент
    |    И АллергииСтудентов.Активна = ИСТИНА
    |    И Состав.Владелец = &Лекарство";
    
    Запрос.УстановитьПараметр("Студент", Студент);
    Запрос.УстановитьПараметр("Лекарство", Лекарство);
    
    Результат = Запрос.Выполнить();
    Если Не Результат.Пустой() Тогда
        Возврат Результат.Выгрузить();
    КонецЕсли;
    
    Возврат Неопределено;
    
КонецФункции

// Получить список аллергий студента
Функция ПолучитьАллергииСтудента(Студент) Экспорт
    
    Запрос = Новый Запрос;
    Запрос.Текст = 
    "ВЫБРАТЬ
    |    АллергииСтудентов.Аллерген.Наименование,
    |    АллергииСтудентов.СтепеньТяжести,
    |    АллергииСтудентов.Симптомы,
    |    АллергииСтудентов.ДатаОбнаружения
    |ИЗ
    |    РегистрСведений.АллергииСтудентов КАК АллергииСтудентов
    |ГДЕ
    |    АллергииСтудентов.Студент = &Студент
    |    И АллергииСтудентов.Активна = ИСТИНА
    |УПОРЯДОЧИТЬ ПО
    |    АллергииСтудентов.СтепеньТяжести УБЫВ";
    
    Запрос.УстановитьПараметр("Студент", Студент);
    
    Возврат Запрос.Выполнить().Выгрузить();
    
КонецФункции